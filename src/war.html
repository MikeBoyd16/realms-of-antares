<!DOCTYPE html>
<!--
Author: Michael Boyd
Date modified: 1/13/19
-->
<html>
    <head>
        <meta charset="utf-8" />
        <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
        <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
        <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    </head>
    <body>
        <div id="container"></div>
    </body>
    <script type="text/babel">
		var locations = {
			'Balmora': { 'Town Hall': 'Town Hall', 'General Goods': 'General Goods', 'Job Board': 'Job Board', 'Go To Vivec': 'Vivec' },
			'Vivec': { 'Bank': 'Bank', 'Blacksmith': 'Blacksmith', 'Guild': 'Guild', 'Go To Balmora': 'Balmora' }
		}

		const LocationActions = ({ locations, currentLocation, onActionClick }) => (
			<div>
				{
					Object.entries(locations[currentLocation]).map(([key, value]) => <button type='button' onClick={() => onActionClick(value)}>{key}</button>)
				}
			</div>
		);

		class Location extends React.Component {
			constructor(props) {
				super(props);
				this.state = {
					name: this.props.name
				};
			}

			handleClick = (e) => { this.setState({ name: e }) }

			render() {
				return(
					<div>
						 <LocationActions locations={locations} currentLocation={this.state.name} onActionClick={this.handleClick} />
					</div>
				);
			}
		};
		
		class ActionBar extends React.Component {
			constructor(props) {
				super(props);
				this.state = {
					location: 'Balmora'
				};
			}
			render() {
				return(
					<div>
						<Location name={this.state.location} />
					</div>
				);
			}
		};
		
		class App extends React.Component {
			render() {
				return(
					<div>
						Hello!
						<ActionBar />
					</div>
				);
			}
		};
		
        ReactDOM.render(<App />, document.getElementById("container"));
    </script>
</html>